@{
    ViewData["Title"] = "Ayarlar";
    var merchantId = ViewBag.MerchantId as Guid?;
}

@section Styles {
    <link rel="stylesheet" href="~/css/modules/settings/settings.css" asp-append-version="true" />
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <h3><i class="fas fa-cog"></i> Mağaza Ayarları</h3>
    <a href="@Url.Action("Edit", new { id = merchantId })" class="btn btn-secondary">
        <i class="fas fa-arrow-left"></i> Profile Dön
    </a>
</div>

<div class="row g-4">
    <div class="col-md-8">
        <!-- Quick Actions -->
        <div class="stat-card mb-3">
            <h5 class="mb-4">Hızlı İşlemler</h5>
            <div class="row g-3">
                <div class="col-md-6">
                    <a href="@Url.Action("Edit", new { id = merchantId })" class="quick-action-card">
                        <div class="quick-action-icon" style="background: #e3f2fd;">
                            <i class="fas fa-store" style="color: #2196F3;"></i>
                        </div>
                        <div class="quick-action-content">
                            <h6>Profil Bilgileri</h6>
                            <small class="text-muted">İsim, adres, iletişim bilgileri</small>
                        </div>
                        <i class="fas fa-chevron-right text-muted"></i>
                    </a>
                </div>

                <div class="col-md-6">
                    <a href="@Url.Action("WorkingHours")" class="quick-action-card">
                        <div class="quick-action-icon" style="background: #fff3e0;">
                            <i class="fas fa-clock" style="color: #FF9800;"></i>
                        </div>
                        <div class="quick-action-content">
                            <h6>Çalışma Saatleri</h6>
                            <small class="text-muted">Haftalık çalışma takvimi</small>
                        </div>
                        <i class="fas fa-chevron-right text-muted"></i>
                    </a>
                </div>

                <div class="col-md-6">
                    <a href="@Url.Action("Index", "Categories")" class="quick-action-card">
                        <div class="quick-action-icon" style="background: #f3e5f5;">
                            <i class="fas fa-tags" style="color: #9C27B0;"></i>
                        </div>
                        <div class="quick-action-content">
                            <h6>Kategoriler</h6>
                            <small class="text-muted">Ürün kategorilerini yönet</small>
                        </div>
                        <i class="fas fa-chevron-right text-muted"></i>
                    </a>
                </div>

                <div class="col-md-6">
                    <a href="@Url.Action("Index", "Products")" class="quick-action-card">
                        <div class="quick-action-icon" style="background: #e8f5e9;">
                            <i class="fas fa-box" style="color: #4CAF50;"></i>
                        </div>
                        <div class="quick-action-content">
                            <h6>Ürünler</h6>
                            <small class="text-muted">Ürün listesi ve stok yönetimi</small>
                        </div>
                        <i class="fas fa-chevron-right text-muted"></i>
                    </a>
                </div>
            </div>
        </div>

        <!-- Notification Settings -->
        <div class="stat-card mb-3">
            <h5 class="mb-4">
                <i class="fas fa-bell"></i> Bildirim Tercihleri
            </h5>
            <div class="notification-setting mb-3">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="notif-new-order" checked />
                    <label class="form-check-label" for="notif-new-order">
                        <strong>Yeni Sipariş Bildirimleri</strong>
                        <br><small class="text-muted">Yeni sipariş geldiğinde bildirim al</small>
                    </label>
                </div>
            </div>

            <div class="notification-setting mb-3">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="notif-sound" checked />
                    <label class="form-check-label" for="notif-sound">
                        <strong>Bildirim Sesi</strong>
                        <br><small class="text-muted">Bildirimler sesli olsun</small>
                    </label>
                </div>
            </div>

            <div class="notification-setting mb-3">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="notif-email" />
                    <label class="form-check-label" for="notif-email">
                        <strong>E-posta Bildirimleri</strong>
                        <br><small class="text-muted">Önemli olaylar için e-posta gönder</small>
                    </label>
                </div>
            </div>

            <div class="notification-setting">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="notif-sms" />
                    <label class="form-check-label" for="notif-sms">
                        <strong>SMS Bildirimleri</strong>
                        <br><small class="text-muted">Kritik durumlar için SMS gönder</small>
                    </label>
                </div>
            </div>

            <div class="alert alert-info mt-3">
                <i class="fas fa-info-circle"></i>
                <small>Bildirim tercihleri tarayıcınızda saklanır. Her cihazda ayrı ayarlanması gerekir.</small>
            </div>
        </div>

        <!-- Advanced Settings -->
        <div class="stat-card">
            <h5 class="mb-4">
                <i class="fas fa-sliders-h"></i> Gelişmiş Ayarlar
            </h5>

            <div class="mb-3">
                <label class="form-label">Dil Tercihi</label>
                <select class="form-select">
                    <option value="tr" selected>Türkçe</option>
                    <option value="en">English</option>
                    <option value="ar">العربية</option>
                </select>
            </div>

            <div class="mb-3">
                <label class="form-label">
                    <i class="fas fa-palette me-2"></i>Tema
                </label>
                <select id="themeSelect" class="form-select">
                    <option value="light">☀️ Açık Tema</option>
                    <option value="dark">🌙 Koyu Tema</option>
                    <option value="auto">🔄 Otomatik (Sistem)</option>
                </select>
                <small class="form-text text-muted">
                    <i class="fas fa-info-circle me-1"></i>Tercih edilen tema kaydedilir ve tüm sayfalarda aktif olur
                </small>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <!-- Account Information -->
        <div class="stat-card mb-3">
            <h6 class="mb-3">
                <i class="fas fa-user-circle"></i> Hesap Bilgileri
            </h6>
            <div class="mb-2">
                <small class="text-muted">Kullanıcı Adı</small>
                <div><strong>@Context.Session.GetString("UserName")</strong></div>
            </div>
            <div class="mb-2">
                <small class="text-muted">E-posta</small>
                <div><strong>@Context.Session.GetString("UserEmail")</strong></div>
            </div>
            <hr />
            <button class="btn btn-outline-danger btn-sm w-100" data-bs-toggle="modal" data-bs-target="#changePasswordModal">
                <i class="fas fa-key"></i> Şifre Değiştir
            </button>
        </div>

        <!-- System Information -->
        <div class="stat-card mb-3">
            <h6 class="mb-3">
                <i class="fas fa-info-circle"></i> Sistem Bilgisi
            </h6>
            <div class="mb-2">
                <small class="text-muted">Portal Versiyonu</small>
                <div><strong>v1.0.0</strong></div>
            </div>
            <div class="mb-2">
                <small class="text-muted">Son Güncelleme</small>
                <div><strong>14 Ekim 2025</strong></div>
            </div>
            <div class="mb-2">
                <small class="text-muted">Durum</small>
                <div>
                    <span class="badge bg-success">
                        <i class="fas fa-circle"></i> Çevrimiçi
                    </span>
                </div>
            </div>
        </div>

        <!-- Help & Support -->
        <div class="stat-card">
            <h6 class="mb-3">
                <i class="fas fa-question-circle"></i> Yardım & Destek
            </h6>
            <a href="#" class="btn btn-outline-primary btn-sm w-100 mb-2">
                <i class="fas fa-book"></i> Kullanım Kılavuzu
            </a>
            <a href="#" class="btn btn-outline-primary btn-sm w-100 mb-2">
                <i class="fas fa-headset"></i> Destek Talebi
            </a>
            <a href="#" class="btn btn-outline-primary btn-sm w-100">
                <i class="fas fa-comments"></i> Geri Bildirim
            </a>
        </div>
    </div>
</div>

<!-- Change Password Modal -->
<div class="modal fade" id="changePasswordModal" tabindex="-1" aria-labelledby="changePasswordModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content" style="border-radius: 16px; border: none; box-shadow: 0 20px 25px rgba(0,0,0,0.15);">
            <div class="modal-header" style="background: linear-gradient(135deg, #dc3545 0%, #b02a37 100%); color: white; border-radius: 16px 16px 0 0;">
                <h5 class="modal-title" id="changePasswordModalLabel">
                    <i class="fas fa-key me-2"></i>Şifre Değiştir
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" style="padding: 2rem;">
                <form id="changePasswordForm">
                    @Html.AntiForgeryToken()
                    
                    <div class="alert alert-info mb-4">
                        <i class="fas fa-info-circle me-2"></i>
                        <small><strong>Güvenlik:</strong> Şifreniz en az 8 karakter olmalı ve büyük harf, küçük harf ve rakam içermelidir.</small>
                    </div>

                    <div class="mb-3">
                        <label for="currentPassword" class="form-label">
                            <i class="fas fa-lock me-1"></i>Mevcut Şifre
                        </label>
                        <input type="password" class="form-control" id="currentPassword" required 
                               style="border-radius: 10px; border: 2px solid #e0e0e0;" 
                               placeholder="Mevcut şifrenizi girin">
                        <div class="invalid-feedback">Lütfen mevcut şifrenizi girin</div>
                    </div>

                    <div class="mb-3">
                        <label for="newPassword" class="form-label">
                            <i class="fas fa-lock me-1"></i>Yeni Şifre
                        </label>
                        <input type="password" class="form-control" id="newPassword" required 
                               style="border-radius: 10px; border: 2px solid #e0e0e0;"
                               placeholder="Yeni şifrenizi girin"
                               minlength="8">
                        <div class="invalid-feedback">Şifre en az 8 karakter olmalıdır</div>
                    </div>

                    <div class="mb-3">
                        <label for="confirmPassword" class="form-label">
                            <i class="fas fa-lock me-1"></i>Yeni Şifre (Tekrar)
                        </label>
                        <input type="password" class="form-control" id="confirmPassword" required 
                               style="border-radius: 10px; border: 2px solid #e0e0e0;"
                               placeholder="Yeni şifrenizi tekrar girin"
                               minlength="8">
                        <div class="invalid-feedback">Şifreler eşleşmiyor</div>
                    </div>

                    <div id="passwordStrength" class="mb-3" style="display: none;">
                        <small class="text-muted">Şifre Gücü:</small>
                        <div class="progress" style="height: 5px; border-radius: 10px;">
                            <div id="strengthBar" class="progress-bar" role="progressbar" style="width: 0%"></div>
                        </div>
                        <small id="strengthText" class="text-muted"></small>
                    </div>
                </form>
            </div>
            <div class="modal-footer" style="border-top: 2px solid #e5e7eb;">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" style="border-radius: 10px;">
                    İptal
                </button>
                <button type="button" id="savePasswordBtn" class="btn btn-danger" style="border-radius: 10px;">
                    <span class="btn-text">
                        <i class="fas fa-save me-2"></i>Şifreyi Değiştir
                    </span>
                    <span class="btn-loading" style="display: none;">
                        <span class="spinner-border spinner-border-sm me-2"></span>
                        Kaydediliyor...
                    </span>
                </button>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/modules/settings/settings.js" asp-append-version="true"></script>
}

